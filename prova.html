<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Avaliação Prática - Cadastro</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, button { margin: 5px 0; display: block; }
    .erro { color: red; font-size: 0.9em; }
    table, th, td { border: 1px solid #ccc; border-collapse: collapse; padding: 5px; }
  </style>
</head>
<body>

  <h1>Cadastro de Usuários</h1>

  <form id="formCadastro">
    <label for="nome">Nome Completo:</label>
    <input type="text" id="nome">
    <span class="erro" id="erroNome"></span>

    <label for="email">E-mail:</label>
    <input type="text" id="email">
    <span class="erro" id="erroEmail"></span>

    <label for="cpf">CPF:</label>
    <input type="text" id="cpf">
    <span class="erro" id="erroCPF"></span>

    <label for="nascimento">Data de Nascimento:</label>
    <input type="date" id="nascimento">
    <span class="erro" id="erroNascimento"></span>

    <button type="submit">Cadastrar</button>
  </form>

  <h2>Usuários Cadastrados</h2>
  <table id="tabelaUsuarios">
    <thead>
      <tr>
        <th>Nome</th>
        <th>E-mail</th>
        <th>CPF</th>
        <th>Data de Nascimento</th>
        <!-- <th>Ações</th> -->
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <script>
    // O aluno deve implementar o código aqui
    document.getElementById("formCadastro").addEventListener("submit", function(event){
      event.preventDefault();
      
      const erroNome = document.getElementById("erroNome")
      const erroEmail = document.getElementById("erroEmail")
      const erroCPF = document.getElementById("erroCPF")
      const erroNascimento = document.getElementById("erroNascimento")

      const nome = document.getElementById("nome").value.trim();
      const email = document.getElementById("email").value.trim();
      const cpf = document.getElementById("cpf").value.trim();
      const nascimento = document.getElementById("nascimento").value.trim();

      const regexEmail = /^[a-z0-9._-]+@[a-z0-9-]+\.[a-z]{2,}$/i
      const regexCPF = /^\d{3}\.\d{3}\.\d{3}-\d{2}$/

      erroNome.textContent = "";
      erroEmail.textContent = "";
      erroCPF.textContent = "";
      erroNascimento.textContent = "";

      let valido = true;

      if(nome === ""){
        valido = false;
        erroNome.textContent = "Nome inválido."
      }
      if(!regexEmail.test(email)){
        valido = false;
        erroEmail.textContent = "Email inválido."
      }
      if(!regexCPF.test(cpf)){
        valido = false;
        erroCPF.textContent = "CPF inválido."
      }
      if(nascimento === ""){
        valido = false;
        erroNascimento.textContent = "Data de nascimento inválida."
      }
      if(valido){
        alert("Usuário cadastrado.")

        const tabela = document.querySelector("tbody")
        const novaLinha = tabela.insertRow();

        novaLinha.innerHTML = `
        <th>${nome}</th>
        <th>${email}</th>
        <th>${cpf}</th>
        <th>${nascimento}</th>
        <th><button>Remover<button><th>
        `

      }


      })

  </script>
</body>
</html>
